<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫–∞ ‚Äî –¢–µ–æ—Ä–∏—è, –ï—Å–µ–ø—Ç–µ—Ä, –¢–µ—Å—Ç (8‚Äì9 —Å—ã–Ω—ã–ø)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --bg:#f1f5f9;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#6b7280;
      --primary:#2563eb;
      --primary2:#7c3aed;
      --accent:#f97316;
      --good:#16a34a;
      --bad:#dc2626;
      --radius:18px;
      --shadow:0 18px 40px rgba(15,23,42,.16);
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:
        radial-gradient(900px 600px at 0% 0%, #dbeafe 0%, transparent 60%),
        radial-gradient(900px 600px at 100% 100%, #fee2e2 0%, transparent 60%),
        linear-gradient(135deg,#e5f3ff,#fff1f7);
      color:var(--text);
    }
    .container{
      max-width:1100px;
      margin:0 auto;
      padding:20px 16px 60px;
    }
    header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:14px;
      margin-bottom:18px;
      padding:16px 18px;
      border-radius:var(--radius);
      background:#ffffffd0;
      backdrop-filter:blur(10px);
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.7);
    }
    @media(max-width:900px){
      header{flex-direction:column;}
    }

    .title-block h1{
      margin:0 0 6px;
      font-size:22px;
    }
    .title-block p{
      margin:0;
      color:var(--muted);
      font-size:13px;
    }

    .badge-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:6px;
    }
    .badge{
      padding:5px 9px;
      font-size:11px;
      border-radius:999px;
      background:#eff6ff;
      color:#1d4ed8;
      font-weight:700;
    }

    .timer-box{
      min-width:220px;
      padding:10px 14px;
      border-radius:14px;
      background:#111827;
      color:white;
      display:flex;
      flex-direction:column;
      gap:6px;
      box-shadow:0 18px 35px rgba(15,23,42,.5);
    }
    .timer-top{
      display:flex;
      justify-content:space-between;
      font-size:12px;
      opacity:.9;
    }
    .timer-time{
      font-size:26px;
      font-weight:800;
      letter-spacing:1px;
    }
    .timer-status{
      font-size:12px;
      font-weight:600;
    }
    .timer-status.ok{color:#bbf7d0;}
    .timer-status.warn{color:#facc15;}
    .timer-status.danger{color:#fecaca;}

    .btn{
      border:0;
      outline:none;
      cursor:pointer;
      padding:8px 12px;
      border-radius:999px;
      font-size:13px;
      font-weight:700;
      display:inline-flex;
      align-items:center;
      gap:6px;
      background:white;
      color:#0f172a;
      box-shadow:0 8px 18px rgba(15,23,42,.15);
      text-decoration:none;
      user-select:none;
    }
    .btn.primary{
      background:linear-gradient(135deg,var(--primary),var(--primary2));
      color:white;
    }
    .btn.ghost{
      background:#ffffffaa;
      backdrop-filter:blur(6px);
    }
    .btn.success{
      background:linear-gradient(135deg,#22c55e,#15803d);
      color:white;
    }

    main{
      display:grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0,0.9fr);
      gap:16px;
      align-items:flex-start;
    }
    @media(max-width:980px){
      main{grid-template-columns:1fr;}
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:16px 18px;
      box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.85);
    }
    h2{
      margin-top:0;
      margin-bottom:8px;
      font-size:18px;
    }
    h3{
      margin-top:16px;
      margin-bottom:6px;
      font-size:15px;
    }
    p{
      margin-top:4px;
      margin-bottom:6px;
      font-size:14px;
      line-height:1.5;
    }
    ul{
      margin-top:4px;
      margin-bottom:8px;
      padding-left:20px;
      font-size:14px;
    }
    code{
      background:#111827;
      color:#e5e7eb;
      padding:2px 5px;
      border-radius:4px;
      font-size:12px;
    }
    .formula{
      display:inline-block;
      padding:3px 6px;
      border-radius:999px;
      background:#eff6ff;
      color:#1e3a8a;
      font-weight:700;
      font-size:13px;
    }
    .example{
      padding:10px 12px;
      border-radius:14px;
      background:#f9fafb;
      border:1px dashed #d1d5db;
      font-size:13px;
    }
    .example strong{color:#111827;}
    .note{
      font-size:13px;
      color:var(--muted);
      background:#f3f4f6;
      border-radius:10px;
      padding:8px 10px;
    }

    /* Test */
    .question{
      margin-bottom:12px;
      padding:10px 12px;
      border-radius:12px;
      background:#f9fafb;
      border:1px solid #e5e7eb;
      font-size:14px;
    }
    .question-title{
      font-weight:700;
      margin-bottom:6px;
    }
    label.option{
      display:block;
      font-size:13px;
      margin-bottom:3px;
      cursor:pointer;
    }
    .small-feedback{
      font-size:12px;
      margin-top:4px;
      color:var(--muted);
    }
    .small-feedback.correct{
      color:var(--good);
      font-weight:600;
    }
    .small-feedback.wrong{
      color:var(--bad);
      font-weight:600;
    }

    .test-result{
      margin-top:10px;
      padding:10px 12px;
      border-radius:12px;
      background:#eff6ff;
      font-size:13px;
      display:none;
    }

    /* Match section */
    .match-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media(max-width:720px){
      .match-grid{grid-template-columns:1fr;}
    }
    .match-item{
      padding:8px 10px;
      border-radius:10px;
      background:#f3f4f6;
      border:1px solid #e5e7eb;
      font-size:13px;
    }
    .match-item input{
      width:40px;
      padding:4px 6px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      font-size:13px;
      margin-left:6px;
      text-align:center;
    }

    /* Save results */
    .save-box{
      margin-top:12px;
      padding:10px 12px;
      border-radius:12px;
      background:#f9fafb;
      border:1px solid #e5e7eb;
      font-size:13px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    .save-box input{
      padding:7px 9px;
      font-size:13px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      min-width:200px;
    }

    .saved-table{
      width:100%;
      border-collapse:collapse;
      margin-top:8px;
      font-size:12px;
    }
    .saved-table th,
    .saved-table td{
      border:1px solid #e5e7eb;
      padding:4px 6px;
      text-align:left;
    }
    .saved-table th{
      background:#eff6ff;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title-block">
        <h1>–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫–∞ ‚Äî —Ç–µ–æ—Ä–∏—è, –º—ã—Å–∞–ª–¥–∞—Ä –∂”ô–Ω–µ —Ç–µ—Å—Ç</h1>
        <p>–û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É, —Ç–µ—Ä—É, –ø–µ—Ä–º—É—Ç–∞—Ü–∏—è. 8‚Äì9 —Å—ã–Ω—ã–ø: —Ç–µ–æ—Ä–∏—è + —Ç–æ–ª—ã“õ —à—ã“ì–∞—Ä—É –∂–æ–ª—ã + —Ç–µ—Å—Ç (10 –±–∞–ª–ª).</p>
        <div class="badge-row">
          <span class="badge">P‚Çô = n!</span>
          <span class="badge">A‚Çô·µè = n!/(n-k)!</span>
          <span class="badge">C‚Çô·µè = n!/(k!(n-k)!)</span>
          <span class="badge">8‚Äì9 —Å—ã–Ω—ã–ø</span>
        </div>
        <div style="margin-top:10px;">
          <a href="index.html" class="btn ghost">‚Üê –ë–∞—Å—Ç—ã –±–µ—Ç–∫–µ “õ–∞–π—Ç—É</a>
        </div>
      </div>

      <div class="timer-box">
        <div class="timer-top">
          <span>–ñ–∞–ª–ø—ã —É–∞“õ—ã—Ç: 15 –º–∏–Ω—É—Ç</span>
          <span id="timerLabel">–¢–∞–π–º–µ—Ä –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä‚Ä¶</span>
        </div>
        <div class="timer-time" id="timerDisplay">15:00</div>
        <div class="timer-status ok" id="timerStatus">–¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞–ø “Ø–ª–≥–µ—Ä!</div>
        <div style="display:flex;gap:6px; margin-top:4px;">
          <button class="btn" id="restartTimerBtn" type="button">‚è± –¢–∞“ì—ã 15 –º–∏–Ω—É—Ç</button>
        </div>
      </div>
    </header>

    <main>
      <!-- –¢–µ–æ—Ä–∏—è –∂”ô–Ω–µ –º—ã—Å–∞–ª–¥–∞—Ä -->
      <section class="card">
        <h2>1. –ù–µ–≥—ñ–∑–≥—ñ —Ç–µ–æ—Ä–∏—è</h2>

        <h3>1.1 –ü–µ—Ä–º—É—Ç–∞—Ü–∏—è (P‚Çô)</h3>
        <p>
          –ï–≥–µ—Ä <strong>n</strong> ”ô—Ä —Ç“Ø—Ä–ª—ñ —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ –±–∞—Ä–ª—ã“õ –º“Ø–º–∫—ñ–Ω —Ä–µ—Ç—Ç—ñ–ª—ñ–∫–ø–µ–Ω –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—Å–∞“õ,
          –æ–Ω—ã <strong>–ø–µ—Ä–º—É—Ç–∞—Ü–∏—è</strong> –¥–µ–π–º—ñ–∑.
        </p>
        <p>
          <span class="formula">P<sub>n</sub> = n!</span> ‚Äî –º“±–Ω–¥–∞“ì—ã
          <code>n!</code> (—Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª) = <code>1¬∑2¬∑3¬∑‚Ä¶¬∑(n-1)¬∑n</code>.
        </p>
        <div class="example">
          <strong>–ú—ã—Å–∞–ª 1 (–ø–µ—Ä–º—É—Ç–∞—Ü–∏—è):</strong><br>
          1, 2, 3, 4 —Ü–∏—Ñ—Ä–ª–∞—Ä—ã–Ω–∞–Ω –Ω–µ—à–µ —Ç“Ø—Ä–ª—ñ 4 —Ç–∞“£–±–∞–ª—ã —Å–∞–Ω “õ“±—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã?<br><br>
          <em>–®–µ—à—É—ñ:</em> 4 ”ô—Ä —Ç“Ø—Ä–ª—ñ —Ü–∏—Ñ—Ä, –±–∞—Ä–ª—ã“ì—ã “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã ‚áí –ø–µ—Ä–º—É—Ç–∞—Ü–∏—è:<br>
          <code>P‚ÇÑ = 4! = 4¬∑3¬∑2¬∑1 = 24</code>.<br>
          –ñ–∞—É–∞–±—ã: <strong>24 —Å–∞–Ω</strong>.
        </div>

        <h3>1.2 –û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É (A‚Çô·µè)</h3>
        <p>
          <strong>–û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É</strong> ‚Äî <strong>n</strong> —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ“£ —ñ—à—ñ–Ω–µ–Ω
          <strong>k</strong> —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ —Ç–∞“£–¥–∞–ø, —Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –±–æ–ª“ì–∞–Ω –∂–∞“ì–¥–∞–π–¥–∞ –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É.
        </p>
        <p>
          <span class="formula">
            A<sub>n</sub><sup>k</sup> =
            n¬∑(n-1)¬∑‚Ä¶¬∑(n-k+1) = n! / (n-k)!
          </span>
        </p>
        <div class="example">
          <strong>–ú—ã—Å–∞–ª 2 (–æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É):</strong><br>
          6 –æ“õ—É—à—ã–Ω—ã“£ —ñ—à—ñ–Ω–µ–Ω –∂–∞—Ä—ã—Å“õ–∞ 3 –æ—Ä—ã–Ω (I, II, III) –±–µ—Ä—ñ–ª–µ–¥—ñ.
          –û“õ—É—à—ã–ª–∞—Ä–¥—ã –Ω–µ—à–µ —Ç“Ø—Ä–ª—ñ –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã?<br><br>
          <em>–®–µ—à—É—ñ:</em> 6 –æ“õ—É—à—ã–¥–∞–Ω 3-—É—ñ–Ω –∞–ª–∞–º—ã–∑, –æ—Ä—ã–Ω–¥–∞—Ä —Ä–µ—Ç—ñ–º–µ–Ω (I, II, III), —Å–æ–Ω–¥—ã“õ—Ç–∞–Ω —Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã.<br>
          <code>A‚ÇÜ¬≥ = 6¬∑5¬∑4 = 120</code>.<br>
          –ñ–∞—É–∞–±—ã: <strong>120 —Ç“Ø—Ä–ª—ñ</strong>.
        </div>

        <h3>1.3 –¢–µ—Ä—É (C‚Çô·µè)</h3>
        <p>
          <strong>–¢–µ—Ä—É</strong> ‚Äî <strong>n</strong> —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ“£ —ñ—à—ñ–Ω–µ–Ω
          <strong>k</strong> —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ —Ç–∞“£–¥–∞–π–º—ã–∑, –±—ñ—Ä–∞“õ <u>—Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å</u>.
        </p>
        <p>
          <span class="formula">
            C(n,k) = C<sub>n</sub><sup>k</sup>
            = n! / (k!¬∑(n-k)!)
          </span>
        </p>
        <div class="example">
          <strong>–ú—ã—Å–∞–ª 3 (—Ç–µ—Ä—É, 8‚Äì9 —Å—ã–Ω—ã–ø):</strong><br>
          10 –æ“õ—É—à—ã–Ω—ã“£ —ñ—à—ñ–Ω–µ–Ω 4 –æ“õ—É—à—ã–¥–∞–Ω —Ç“±—Ä–∞—Ç—ã–Ω –æ–ª–∏–º–ø–∏–∞–¥–∞ –∫–æ–º–∞–Ω–¥–∞—Å—ã “õ“±—Ä—ã–ª–∞–¥—ã.
          “ö–∞–Ω—à–∞ —Ç“Ø—Ä–ª—ñ –∫–æ–º–∞–Ω–¥–∞ –∂–∞—Å–∞—É“ì–∞ –±–æ–ª–∞–¥—ã?<br><br>
          <em>–®–µ—à—É—ñ:</em> –ö–æ–º–∞–Ω–¥–∞–¥–∞ –æ—Ä—ã–Ω–¥–∞—Ä (–∫–∞–ø–∏—Ç–∞–Ω, —Ç.–±.) –±”©–ª—ñ–Ω–±–µ–≥–µ–Ω ‚Äì —Ç–µ–∫ “õ“±—Ä–∞–º –º–∞“£—ã–∑–¥—ã ‚áí —Ç–µ—Ä—É.<br>
          <code>
            C(10,4) = 10! / (4!¬∑6!) = 10¬∑9¬∑8¬∑7 / (4¬∑3¬∑2¬∑1) = 210
          </code>.<br>
          –ñ–∞—É–∞–±—ã: <strong>210 –∫–æ–º–∞–Ω–¥–∞</strong>.
        </div>

        <h3>1.4 “ö—ã—Å“õ–∞ –µ—Ä–µ–∂–µ (–ª–∞–π—Ñ—Ö–∞–∫)</h3>
        <ul>
          <li>–†–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã, –±–∞—Ä–ª—ã“õ —ç–ª–µ–º–µ–Ω—Ç “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã ‚Üí <strong>–ø–µ—Ä–º—É—Ç–∞—Ü–∏—è</strong>.</li>
          <li>–†–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã, —Ç–µ–∫ –±—ñ—Ä –±”©–ª—ñ–≥—ñ ‚Üí <strong>–æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É</strong>.</li>
          <li>–†–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å ‚Üí <strong>—Ç–µ—Ä—É</strong>.</li>
        </ul>
        <p class="note">
          ‚Äú–ö–æ–º–∞–Ω–¥–∞ “õ“±—Ä—É‚Äù, ‚Äú“õ–∞—Ç—ã—Å—É—à—ã–ª–∞—Ä–¥—ã —Ç–∞“£–¥–∞—É‚Äù, ‚Äú–∫–æ–º–∏—Å—Å–∏—è “õ“±—Ä–∞–º—ã–Ω —Ç–∞“£–¥–∞—É‚Äù –¥–µ–≥–µ–Ω —Å”©–∑–¥–µ—Ä
          –∂–∏—ñ <strong>—Ç–µ—Ä—É–≥–µ (C‚Çô·µè)</strong> –∫–µ–ª–µ–¥—ñ. –ê–ª –æ—Ä—ã–Ω–¥–∞—Ä (I, II, III) –±–æ–ª—Å–∞ ‚Äî –∫”©–±—ñ–Ω–µ
          <strong>–æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É (A‚Çô·µè)</strong>.
        </p>
      </section>

      <!-- –¢–µ—Å—Ç –∂”ô–Ω–µ —Å”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É -->
      <section class="card">
        <h2>2. –¢–µ—Å—Ç (10 —Å“±—Ä–∞“õ, 10 –±–∞–ª–ª)</h2>
        <p style="font-size:13px; color:var(--muted);">
          ”ò—Ä –¥“±—Ä—ã—Å –∂–∞—É–∞–ø ‚Äî 1 –±–∞–ª–ª. 8‚Äì9 —Å—ã–Ω—ã–ø –¥–µ“£–≥–µ–π—ñ–Ω–¥–µ–≥—ñ –µ—Å–µ–ø—Ç–µ—Ä.
        </p>

        <div id="testArea"></div>

        <div class="test-result" id="testResult"></div>

        <h2 style="margin-top:18px;">3. –°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É (5 –∂“±–ø)</h2>
        <p style="font-size:13px; color:var(--muted);">
          –°–æ–ª –∂–∞“õ—Ç–∞“ì—ã —Ñ–æ—Ä–º—É–ª–∞“ì–∞ —Å”ô–π–∫–µ—Å –æ“£ –∂–∞“õ—Ç–∞“ì—ã ”ô—Ä—ñ–ø—Ç–µ—Ä–¥—ñ –∂–∞–∑—ã“£—ã–∑
          (–º—ã—Å–∞–ª—ã: <code>a</code>, <code>b</code>, <code>c</code>).
        </p>

        <div class="match-grid" id="matchArea"></div>

        <div class="test-result" id="matchResult"></div>

        <h2 style="margin-top:18px;">4. –ù”ô—Ç–∏–∂–µ–Ω—ñ –µ—Å–µ–ø—Ç–µ—É –∂”ô–Ω–µ —Å–∞“õ—Ç–∞—É</h2>
        <div class="save-box">
          <div style="flex:1 1 200px;">
            <div id="scoreSummary" style="margin-bottom:4px;">
              –ñ–∞–ª–ø—ã –±–∞–ª–ª: ”ô–∑—ñ—Ä–≥–µ –µ—Å–µ–ø—Ç–µ–ª–º–µ–¥—ñ.
            </div>
            <button type="button" class="btn primary" id="checkAllBtn">
              ‚úÖ –ë–∞—Ä–ª—ã“ì—ã–Ω —Ç–µ–∫—Å–µ—Ä—É –∂”ô–Ω–µ –±–∞–ª–ª —à—ã“ì–∞—Ä—É
            </button>
          </div>
          <div style="flex:1 1 220px;">
            <label for="studentName" style="display:block; margin-bottom:4px;">–ê—Ç—ã-–∂”©–Ω—ñ:</label>
            <input id="studentName" placeholder="–ú—ã—Å–∞–ª—ã: –ê–º–∞–Ω–≥–µ–ª–¥—ñ –ù“±—Ä–±–µ–∫" />
          </div>
          <div>
            <button type="button" class="btn success" id="saveResultBtn">
              üíæ –ù”ô—Ç–∏–∂–µ–Ω—ñ —Å–∞“õ—Ç–∞—É
            </button>
          </div>
        </div>

        <div id="saveMessage" style="margin-top:8px; font-size:12px; color:var(--muted);"></div>

        <div style="margin-top:12px;">
          <strong style="font-size:13px;">–°–∞“õ—Ç–∞–ª“ì–∞–Ω –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä (–æ—Å—ã “õ“±—Ä—ã–ª“ì—ã–¥–∞):</strong>
          <table class="saved-table" id="resultsTable">
            <thead>
              <tr>
                <th>‚Ññ</th>
                <th>–ê—Ç—ã-–∂”©–Ω—ñ</th>
                <th>–ë–∞–ª–ª (0‚Äì10)</th>
                <th>–£–∞“õ—ã—Ç</th>
                <th>“ö–∞–ª“ì–∞–Ω —É–∞“õ—ã—Ç</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button type="button" class="btn" id="clearResultsBtn" style="margin-top:6px;">
            üóë –ù”ô—Ç–∏–∂–µ–ª–µ—Ä–¥—ñ —Ç–∞–∑–∞–ª–∞—É
          </button>
        </div>
      </section>
    </main>
  </div>

  <script>
    // ---------- 1) 15 –º–∏–Ω—É—Ç—Ç—ã“õ —Ç–∞–π–º–µ—Ä ----------
    const TOTAL_SECONDS = 15 * 60;
    let remaining = TOTAL_SECONDS;
    let timerId = null;
    const timerDisplay = document.getElementById('timerDisplay');
    const timerLabel = document.getElementById('timerLabel');
    const timerStatus = document.getElementById('timerStatus');
    const restartTimerBtn = document.getElementById('restartTimerBtn');

    function formatTime(sec){
      const m = Math.floor(sec/60);
      const s = sec % 60;
      return String(m).padStart(2,'0') + ':' + String(s).padStart(2,'0');
    }

    function updateTimerUI(){
      timerDisplay.textContent = formatTime(remaining);
      if(remaining <= 0){
        timerStatus.textContent = '–£–∞“õ—ã—Ç –±—ñ—Ç—Ç—ñ. –ï–≥–µ—Ä “Ø–ª–≥–µ—Ä–º–µ—Å–µ“£, —Ç–∞–π–º–µ—Ä–¥—ñ “õ–∞–π—Ç–∞ “õ–æ—Å—ã–ø –∂–∞–ª“ì–∞—Å—Ç—ã—Ä–∞ –∞–ª–∞—Å—ã“£.';
        timerStatus.className = 'timer-status danger';
        timerLabel.textContent = '–£–∞“õ—ã—Ç –∞—è“õ—Ç–∞–ª–¥—ã';
        clearInterval(timerId);
        timerId = null;
      } else if(remaining <= 3*60){
        timerStatus.textContent = '–°–æ“£“ì—ã 3 –º–∏–Ω—É—Ç! –¢–∞–ø—Å—ã—Ä–º–∞–Ω—ã –∞—è“õ—Ç–∞—É“ì–∞ —Ç—ã—Ä—ã—Å.';
        timerStatus.className = 'timer-status warn';
        timerLabel.textContent = '–¢–∞–π–º–µ—Ä –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä‚Ä¶';
      } else {
        timerStatus.textContent = '–¢–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞–ø “Ø–ª–≥–µ—Ä!';
        timerStatus.className = 'timer-status ok';
        timerLabel.textContent = '–¢–∞–π–º–µ—Ä –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä‚Ä¶';
      }
    }

    function startTimer(){
      if(timerId) clearInterval(timerId);
      remaining = TOTAL_SECONDS;
      updateTimerUI();
      timerId = setInterval(() => {
        remaining--;
        if(remaining <= 0){
          remaining = 0;
          updateTimerUI();
        } else {
          updateTimerUI();
        }
      }, 1000);
    }

    restartTimerBtn.addEventListener('click', startTimer);
    // –±–µ—Ç –∞—à—ã–ª“ì–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç—Ç—ã –∂“Ø—Ä—Å—ñ–Ω
    startTimer();

    // ---------- 2) –¢–µ—Å—Ç —Å“±—Ä–∞“õ—Ç–∞—Ä—ã ----------
    const testQuestions = [
      {
        q: "1) 5 ”ô—Ä —Ç“Ø—Ä–ª—ñ –∫—ñ—Ç–∞–ø—Ç—ã —Å”©—Ä–µ–¥–µ –Ω–µ—à–µ —Ç“Ø—Ä–ª—ñ —Ä–µ—Ç–ø–µ–Ω –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É“ì–∞ –±–æ–ª–∞–¥—ã?",
        options: ["5", "20", "60", "120"],
        correct: 3,
        explain: "P‚ÇÖ = 5! = 5¬∑4¬∑3¬∑2¬∑1 = 120."
      },
      {
        q: "2) 7 –æ“õ—É—à—ã–Ω—ã“£ —ñ—à—ñ–Ω–µ–Ω –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç –ø–µ–Ω –≤–∏—Ü–µ-–ø—Ä–µ–∑–∏–¥–µ–Ω—Ç (2 –æ—Ä—ã–Ω, —Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã) —Ç–∞“ì–∞–π—ã–Ω–¥–∞–ª–∞–¥—ã. –ù–µ—à–µ —Ç“Ø—Ä–ª—ñ —Ç”ô—Å—ñ–ª?",
        options: ["14", "21", "42", "56"],
        correct: 2,
        explain: "A‚Çá¬≤ = 7¬∑6 = 42 (–æ—Ä—ã–Ω –º–∞“£—ã–∑–¥—ã)."
      },
      {
        q: "3) –°—ã–Ω—ã–ø—Ç–∞“ì—ã 10 –æ“õ—É—à—ã–Ω—ã“£ —ñ—à—ñ–Ω–µ–Ω 3 –æ“õ—É—à—ã–¥–∞–Ω —Ç“±—Ä–∞—Ç—ã–Ω —Ç–æ–ø –Ω–µ—à–µ —Ç“Ø—Ä–ª—ñ “õ“±—Ä—ã–ª–∞–¥—ã? (—Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å)",
        options: ["30", "45", "90", "120"],
        correct: 3,
        explain: "C(10,3) = 10!/(3!¬∑7!) = 10¬∑9¬∑8/(3¬∑2¬∑1) = 120."
      },
      {
        q: "4) 6 ”ô—Ä —Ç“Ø—Ä–ª—ñ ”ô—Ä—ñ–ø—Ç–µ–Ω “±–∑—ã–Ω–¥—ã“ì—ã 4 –±–æ–ª–∞—Ç—ã–Ω ¬´–∫–æ–¥ —Å”©–∑¬ª “õ“±—Ä—ã–ª–∞–¥—ã. ”ò—Ä –∫–æ–¥—Ç–∞ ”ô—Ä—ñ–ø “õ–∞–π—Ç–∞–ª–∞–Ω–±–∞–π–¥—ã, —Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã. –ù–µ—à–µ —Ç“Ø—Ä–ª—ñ –∫–æ–¥?",
        options: ["1296", "360", "720", "4096"],
        correct: 1,
        explain: "A‚ÇÜ‚Å¥ = 6¬∑5¬∑4¬∑3 = 360 (“õ–∞–π—Ç–∞–ª–∞–Ω—É –∂–æ“õ, —Ä–µ—Ç –º–∞“£—ã–∑–¥—ã)."
      },
      {
        q: "5) 8 —Å–ø–æ—Ä—Ç—à—ã–Ω—ã“£ —ñ—à—ñ–Ω–µ–Ω 3 –∂“Ø–ª–¥–µ–ª—ñ –æ—Ä—ã–Ω (I, II, III) –±–µ—Ä—ñ–ª–µ–¥—ñ. –ù–µ—à–µ —Ç“Ø—Ä–ª—ñ –∂“Ø–ª–¥–µ “Ø–ª–µ—Å—Ç—ñ—Ä—É –±–∞—Ä?",
        options: ["56", "168", "336", "512"],
        correct: 2,
        explain: "A‚Çà¬≥ = 8¬∑7¬∑6 = 336."
      },
      {
        q: "6) 9 –∞–¥–∞–º–Ω—ã“£ —ñ—à—ñ–Ω–µ–Ω 2 –∞–¥–∞–º–¥—ã –∂–∞–π “ì–∞–Ω–∞ —Ñ–æ—Ç–æ—Å–µ—Å—Å–∏—è“ì–∞ —Ç–∞“£–¥–∞–π–º—ã–∑ (—Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å). –ù–µ—à–µ —Ç“Ø—Ä–ª—ñ —Ç”ô—Å—ñ–ª?",
        options: ["18", "36", "72", "81"],
        correct: 1,
        explain: "C(9,2) = 9¬∑8/2 = 36."
      },
      {
        q: "7) 4 ”ô—Ä—ñ–ø—Ç–µ–Ω —Ç“±—Ä–∞—Ç—ã–Ω —Å”©–∑–¥—ñ“£ –±–∞—Ä–ª—ã“õ ”ô—Ä—ñ–ø—Ç–µ—Ä—ñ ”ô—Ä —Ç“Ø—Ä–ª—ñ. –û–ª–∞—Ä–¥—ã “õ–∞–π—Ç–∞ —Ä–µ—Ç—Ç–µ—É–¥—ñ“£ “õ–∞–Ω—à–∞ —Ç“Ø—Ä–ª—ñ —Ç”ô—Å—ñ–ª—ñ –±–∞—Ä?",
        options: ["8", "12", "24", "48"],
        correct: 2,
        explain: "P‚ÇÑ = 4! = 24."
      },
      {
        q: "8) –ú–µ–∫—Ç–µ–ø—Ç–µ 12 –º“±“ì–∞–ª—ñ–º –±–∞—Ä. –û–ª–∞—Ä–¥—ã“£ —ñ—à—ñ–Ω–µ–Ω 3 –º“±“ì–∞–ª—ñ–º–Ω–µ–Ω —Ç“±—Ä–∞—Ç—ã–Ω –∫–æ–º–∏—Å—Å–∏—è “õ“±—Ä—ã–ª–∞–¥—ã. –ù–µ—à–µ —Ç“Ø—Ä–ª—ñ –∫–æ–º–∏—Å—Å–∏—è?",
        options: ["36", "132", "220", "720"],
        correct: 2,
        explain: "C(12,3) = 12¬∑11¬∑10/(3¬∑2¬∑1) = 220."
      },
      {
        q: "9) C(6,2) –º”ô–Ω—ñ–Ω —Ç–∞–ø.",
        options: ["12", "15", "20", "30"],
        correct: 1,
        explain: "C(6,2) = 6!/(2!¬∑4!) = 6¬∑5/2 = 15."
      },
      {
        q: "10) “ö–∞–π —Ç“±–∂—ã—Ä—ã–º –¥“±—Ä—ã—Å?",
        options: [
          "–ü–µ—Ä–º—É—Ç–∞—Ü–∏—è–¥–∞ —Ä–µ—Ç –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å.",
          "–¢–µ—Ä—É–¥–µ ”ô—Ä“õ–∞—à–∞–Ω –±–∞—Ä–ª—ã“õ —ç–ª–µ–º–µ–Ω—Ç “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.",
          "–û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É–¥–∞ —Ä–µ—Ç –º–∞“£—ã–∑–¥—ã.",
          "–¢–µ—Ä—É–¥–µ —Ä–µ—Ç ”ô—Ä–¥–∞–π—ã–º –º–∞“£—ã–∑–¥—ã."
        ],
        correct: 2,
        explain: "–û—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É–¥–∞ (A‚Çô·µè) —Ä–µ—Ç –º–∞“£—ã–∑–¥—ã, —Ç–µ—Ä—É–¥–µ (C‚Çô·µè) ‚Äì –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å."
      }
    ];

    const testArea = document.getElementById('testArea');

    function renderTest(){
      testArea.innerHTML = '';
      testQuestions.forEach((q, idx) => {
        const div = document.createElement('div');
        div.className = 'question';
        div.dataset.index = idx;
        const title = document.createElement('div');
        title.className = 'question-title';
        title.textContent = q.q;
        div.appendChild(title);

        q.options.forEach((opt, i) => {
          const id = `q${idx}_opt${i}`;
          const label = document.createElement('label');
          label.className = 'option';
          label.htmlFor = id;
          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = `q${idx}`;
          radio.id = id;
          radio.value = i;
          label.appendChild(radio);
          label.appendChild(document.createTextNode(' ' + opt));
          div.appendChild(label);
        });

        const fb = document.createElement('div');
        fb.className = 'small-feedback';
        fb.id = `fb${idx}`;
        div.appendChild(fb);

        testArea.appendChild(div);
      });
    }

    renderTest();

    function checkTest(){
      let score = 0;
      let details = [];
      testQuestions.forEach((q, idx) => {
        const selected = document.querySelector(`input[name="q${idx}"]:checked`);
        const fb = document.getElementById(`fb${idx}`);
        if(!selected){
          fb.textContent = "–ñ–∞—É–∞–ø —Ç–∞“£–¥–∞–ª–º–∞“ì–∞–Ω.";
          fb.className = 'small-feedback wrong';
          details.push(`–°“±—Ä–∞“õ ${idx+1}: –∂–∞—É–∞–ø —Ç–∞“£–¥–∞–ª–º–∞“ì–∞–Ω.`);
          return;
        }
        if(Number(selected.value) === q.correct){
          score++;
          fb.textContent = "–î“±—Ä—ã—Å!";
          fb.className = 'small-feedback correct';
        } else {
          fb.textContent = "“ö–∞—Ç–µ. " + q.explain;
          fb.className = 'small-feedback wrong';
          details.push(`–°“±—Ä–∞“õ ${idx+1}: “õ–∞—Ç–µ. ${q.explain}`);
        }
      });
      return {score, details};
    }

    const testResultEl = document.getElementById('testResult');

    // ---------- 3) –°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É ----------
    const matchPairs = [
      {
        formula: "P‚Çô = n!",
        letter: "a",
        desc: "–ë–∞—Ä–ª—ã“õ —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ“£ –æ—Ä—ã–Ω –∞—É—ã—Å—Ç—ã—Ä—É—ã (–ø–µ—Ä–º—É—Ç–∞—Ü–∏—è)."
      },
      {
        formula: "A‚Çô·µè = n!/(n-k)!",
        letter: "b",
        desc: "–†–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É."
      },
      {
        formula: "C‚Çô·µè = n!/(k!(n-k)!)",
        letter: "c",
        desc: "–†–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã –µ–º–µ—Å —Ç–µ—Ä—É."
      },
      {
        formula: "n!",
        letter: "d",
        desc: "1-–¥–µ–Ω n-–≥–µ –¥–µ–π—ñ–Ω–≥—ñ –±–∞—Ä–ª—ã“õ –Ω–∞—Ç—É—Ä–∞–ª —Å–∞–Ω–¥–∞—Ä–¥—ã“£ –∫”©–±–µ–π—Ç—ñ–Ω–¥—ñ—Å—ñ."
      },
      {
        formula: "C‚Çô·µè = C‚Çô‚Åø‚Åª·µè",
        letter: "e",
        desc: "–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫–∞–¥–∞“ì—ã —Å–∏–º–º–µ—Ç—Ä–∏—è —Ñ–æ—Ä–º—É–ª–∞—Å—ã."
      }
    ];

    const matchArea = document.getElementById('matchArea');

    function renderMatch(){
      const leftCol = document.createElement('div');
      const rightCol = document.createElement('div');

      matchPairs.forEach((item, idx) => {
        const div = document.createElement('div');
        div.className = 'match-item';
        div.innerHTML = `<strong>${idx+1}) ${item.formula}</strong><br>
          –°”ô–π–∫–µ—Å ”ô—Ä—ñ–ø—Ç—ñ –∂–∞–∑—ã“£—ã–∑:
          <input maxlength="1" data-index="${idx}" />`;
        leftCol.appendChild(div);
      });

      const shuffled = [...matchPairs].sort(() => Math.random() - 0.5);
      shuffled.forEach((item) => {
        const div = document.createElement('div');
        div.className = 'match-item';
        div.innerHTML = `<strong>${item.letter})</strong> ${item.desc}`;
        rightCol.appendChild(div);
      });

      matchArea.innerHTML = '';
      matchArea.appendChild(leftCol);
      matchArea.appendChild(rightCol);
    }

    renderMatch();

    function checkMatch(){
      const inputs = matchArea.querySelectorAll('input[data-index]');
      let correct = 0;
      let total = matchPairs.length;
      inputs.forEach((inp) => {
        const idx = Number(inp.dataset.index);
        const val = (inp.value || '').trim().toLowerCase();
        if(val === matchPairs[idx].letter){
          correct++;
          inp.style.borderColor = 'var(--good)';
        } else {
          inp.style.borderColor = 'var(--bad)';
        }
      });
      return {correct, total};
    }

    const matchResultEl = document.getElementById('matchResult');

    // ---------- 4) –ë–∞—Ä–ª—ã“ì—ã–Ω —Ç–µ–∫—Å–µ—Ä—É –∂”ô–Ω–µ –±–∞–ª–ª —à—ã“ì–∞—Ä—É ----------
    const checkAllBtn = document.getElementById('checkAllBtn');
    const scoreSummaryEl = document.getElementById('scoreSummary');

    let lastScore = null;

    checkAllBtn.addEventListener('click', () => {
      const testRes = checkTest();
      const matchRes = checkMatch();

      const mainScore = testRes.score;     // 0‚Äì10
      const bonus = matchRes.correct * 0.2; // 5 –∂“±–ø ‚Üí –º–∞–∫—Å–∏–º—É–º +1 –±–∞–ª–ª
      const totalScore = Math.min(10, +(mainScore + bonus).toFixed(1));

      lastScore = totalScore;

      let text = `–¢–µ—Å—Ç—Ç–µ–Ω –¥“±—Ä—ã—Å –∂–∞—É–∞–ø: ${testRes.score}/10. `;
      text += `–°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É–¥–µ–Ω –¥“±—Ä—ã—Å: ${matchRes.correct}/${matchRes.total}. `;
      text += `–ñ–∞–ª–ø—ã –±–∞–ª–ª (—à–∞–º–∞–º–µ–Ω): ${totalScore} / 10.`;

      testResultEl.style.display = 'block';
      testResultEl.textContent = text;

      matchResultEl.style.display = 'block';
      matchResultEl.textContent = `–°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É –Ω”ô—Ç–∏–∂–µ—Å—ñ: ${matchRes.correct}/${matchRes.total}.`;

      scoreSummaryEl.textContent = '–ñ–∞–ª–ø—ã –±–∞–ª–ª: ' + totalScore + ' / 10.';
    });

    // ---------- 5) –ù”ô—Ç–∏–∂–µ–Ω—ñ localStorage-“õ–∞ —Å–∞“õ—Ç–∞—É ----------
    const saveResultBtn = document.getElementById('saveResultBtn');
    const studentNameEl = document.getElementById('studentName');
    const saveMessageEl = document.getElementById('saveMessage');
    const resultsTableBody = document.querySelector('#resultsTable tbody');
    const clearResultsBtn = document.getElementById('clearResultsBtn');

    const STORAGE_KEY = 'mathBoard_combinatorics_results';

    function loadResults(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return [];
      try{
        const arr = JSON.parse(raw);
        return Array.isArray(arr) ? arr : [];
      }catch(e){
        return [];
      }
    }

    function saveResults(arr){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    }

    function renderResultsTable(){
      const arr = loadResults();
      resultsTableBody.innerHTML = '';
      arr.forEach((row, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${idx+1}</td>
          <td>${row.name}</td>
          <td>${row.score}</td>
          <td>${row.time}</td>
          <td>${row.remaining}</td>
        `;
        resultsTableBody.appendChild(tr);
      });
    }

    renderResultsTable();

    saveResultBtn.addEventListener('click', () => {
      if(lastScore === null){
        saveMessageEl.textContent = '–ê–ª–¥—ã–º–µ–Ω ‚Äú–ë–∞—Ä–ª—ã“ì—ã–Ω —Ç–µ–∫—Å–µ—Ä—É‚Äù –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã–ø, –±–∞–ª–ª —à—ã“ì–∞—Ä—ã–ø –∞–ª—ã“£—ã–∑.';
        saveMessageEl.style.color = 'var(--bad)';
        return;
      }
      const name = studentNameEl.value.trim();
      if(!name){
        saveMessageEl.textContent = '–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã“£—ã–∑.';
        saveMessageEl.style.color = 'var(--bad)';
        return;
      }

      const now = new Date();
      const timeStr = now.toLocaleString('kk-KZ', {
        year: 'numeric', month: '2-digit', day: '2-digit',
        hour: '2-digit', minute: '2-digit'
      });

      const result = {
        name,
        score: lastScore,
        time: timeStr,
        remaining: formatTime(remaining)
      };

      const arr = loadResults();
      arr.push(result);
      saveResults(arr);
      renderResultsTable();

      saveMessageEl.textContent = '–ù”ô—Ç–∏–∂–µ —Å–∞“õ—Ç–∞–ª–¥—ã.';
      saveMessageEl.style.color = 'var(--good)';
    });

    clearResultsBtn.addEventListener('click', () => {
      if(confirm('–ë–∞—Ä–ª—ã“õ —Å–∞“õ—Ç–∞–ª“ì–∞–Ω –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä–¥—ñ ”©—à—ñ—Ä—É–¥—ñ “õ–∞–ª–∞–π—Å—ã–∑ –±–∞?')){
        saveResults([]);
        renderResultsTable();
        saveMessageEl.textContent = '–ë–∞—Ä–ª—ã“õ –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä ”©—à—ñ—Ä—ñ–ª–¥—ñ.';
        saveMessageEl.style.color = 'var(--muted)';
      }
    });
  </script>
</body>
</html>
