<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <title>–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è ‚Äî —Ç–µ—Å—Ç, —Ç–∞“õ—Ç–∞, –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{--card:#fff;--bg:#f2f8fc;--muted:#64748b;--accent:#a21caf;--danger:#ef4444;--good:#22c55e;}
    body{margin:0;background:var(--bg);font-family:sans-serif;}
    .container{max-width:1120px;margin:0 auto;padding:20px 12px 65px;}
    header{display:flex;justify-content:space-between;align-items:flex-start;gap:14px;margin-bottom:18px;padding:13px 15px;background:var(--card);box-shadow:0 1px 15px #9333ea15;border-radius:17px;}
    @media(max-width:990px){header{flex-direction:column;}}
    .title h1{margin:0 0 6px;font-size:21px;color:var(--accent);}
    .title p{margin:1px 0 6px 0;color:var(--muted);font-size:13px;}
    .badge-row{display:flex;gap:8px;margin-bottom:5px;}
    .badge{padding:5px 8px;border-radius:99px;background:#f3e8ff;color:#a21caf;font-size:12px;}
    nav a{font-size:13px;color:var(--accent);margin-right:10px;}
    .timer-box{min-width:200px;padding:9px 13px;background:var(--accent);color:#fff;border-radius:14px;box-shadow:0 0 18px #9333ea19;}
    .timer-time{font-size:25px;font-weight:900;}
    .timer-status{font-size:13px;}
    main{display:grid;grid-template-columns: 1.06fr 0.94fr;gap:14px;align-items:flex-start;}
    @media(max-width:980px){main{grid-template-columns:1fr;}}
    .card{background:var(--card);border-radius:16px;padding:14px 20px;margin-bottom:17px;box-shadow:0 2px 13px #a21caf24;}
    h2{margin-top:0;}
    h3{margin-top:15px;}
    .formula{background:#f3e8ff;border-radius:999px;padding:4px 11px;font-size:13px;font-weight:700;color:#a21caf;}
    .ex{background:#f7f7fc;padding:9px 13px 10px 17px;border-radius:10px;font-size:13px;}
    ul{font-size:14px;}
    .board{background:#f8fafc;padding:10px 9px 15px;border-radius:14px;margin-bottom:13px;}
    .tools{display:flex;gap:7px;align-items:center;}
    .tools .tool{padding:5px 9px;border-radius:9px;background:#f3e8ff;font-size:13px;font-weight:700;}
    canvas{width:100%;height:170px;border-radius:12px;background:#faf5ff;border:1px solid #e8d5fa;}
    .calc{background:#fbeafe;padding:11px 13px 13px;border-radius:12px;}
    .calc input,.calc select{padding:7px 11px;border-radius:9px;border:1px solid #c4b5fd;margin-bottom:7px;}
    .calc .out{background:var(--accent);color:#fff;padding:7px 9px;border-radius:7px;margin-top:4px;font-size:13px;}
    .question{margin-bottom:12px;padding:9px 11px;background:#faf5ff;border-radius:11px;}
    .question-title{font-weight:700;margin-bottom:6px;}
    label.option{display:block;font-size:13px;margin-bottom:3px;}
    .small-feedback{font-size:12px;margin-top:3px;}
    .small-feedback.correct{color:var(--good);}
    .small-feedback.wrong{color:var(--danger);}
    .test-result{padding:8px 12px;border-radius:10px;background:#f3e8ff;font-size:13px;margin:8px 0;}
    .match-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    .match-item{padding:7px 10px;border-radius:7px;background:#faf5ff;margin:5px 0;}
    .match-item input{width:38px;border-radius:6px;}
    .save-box{margin-top:10px;padding:7px 11px;border-radius:10px;background:#f6effc;display:flex;gap:7px;align-items:center;}
    .save-box input{padding:6px 10px;font-size:13px;border-radius:999px;border:1px solid #d8b4fe;min-width:130px;}
    .saved-table{width:100%;border-collapse:collapse;margin-top:7px;font-size:12px;}
    .saved-table th,.saved-table td{border:1px solid #ecfeff;padding:4px 6px;}
    .saved-table th{background:#e9d5ff;}
    .chip{padding:5px 8px;border-radius:99px;background:#f3e8ff;font-size:12px;}
    footer{margin-top:16px;}
  </style>
</head>
<body>
<div class="container">
  <header>
    <div class="title">
      <h1>–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è ‚Äî —Ç–µ—Å—Ç, —Ç–∞“õ—Ç–∞, –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
      <p>sin, cos, tg, –Ω–µ–≥—ñ–∑–≥—ñ —Ñ–æ—Ä–º—É–ª–∞–ª–∞—Ä, –∞–Ω—ã“õ—Ç–∞–º–∞–ª–∞—Ä, –º—ã—Å–∞–ª, 10 –±–∞–ª–ª–¥—ã“õ —Ç–µ—Å—Ç, —Ç–∞“õ—Ç–∞ –∂”ô–Ω–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä.</p>
      <div class="badge-row">
        <span class="badge">8‚Äì9 —Å—ã–Ω—ã–ø</span>
        <span class="badge">sin, cos, tg</span>
        <span class="badge">15 –º–∏–Ω —Ç–µ—Å—Ç</span>
      </div>
      <nav>
        <a href="index.html">‚Üê –ë–∞—Å—Ç—ã –±–µ—Ç</a>
        <a href="progressions.html">–ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è–ª–∞—Ä</a>
        <a href="geometry_plane.html">–ì–µ–æ–º–µ—Ç—Ä–∏—è</a>
      </nav>
    </div>
    <div class="timer-box">
      <div style="font-size:12px;margin-bottom:3px;">–£–∞“õ—ã—Ç—ã: 15 –º–∏–Ω</div>
      <div class="timer-time" id="timerDisplay">15:00</div>
      <div class="timer-status" id="timerStatus">–û—Ä—ã–Ω–¥–∞—É —É–∞“õ—ã—Ç—ã –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä</div>
      <button id="restartTimerBtn" style="margin-top:5px;border-radius:8px;padding:5px 9px;border:0;cursor:pointer;">‚è± 15 –º–∏–Ω “õ–∞–π—Ç–∞ “õ–æ—Å</button>
    </div>
  </header>
  <main>
    <section>
      <div class="card">
        <h2>–¢–µ–æ—Ä–∏—è –∂”ô–Ω–µ –Ω–µ–≥—ñ–∑–≥—ñ —Ñ–æ—Ä–º—É–ª–∞–ª–∞—Ä</h2>
        <h3>1. –ù–µ–≥—ñ–∑–≥—ñ –∞–Ω—ã“õ—Ç–∞–º–∞–ª–∞—Ä</h3>
        <div><span class="formula">sin Œ± = “õ–∞—Ä—Å—ã / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞</span> &nbsp; <span class="formula">cos Œ± = —ñ—Ä–≥–µ–ª–µ—Å / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞</span></div>
        <div><span class="formula">tg Œ± = “õ–∞—Ä—Å—ã / —ñ—Ä–≥–µ–ª–µ—Å = sin Œ± / cos Œ±</span></div>
        <div class="ex"><b>–ú—ã—Å–∞–ª 1:</b> ABC —Ç—ñ–∫–±“±—Ä—ã—à—Ç—ã “Ø—à–±“±—Ä—ã—à—Ç–∞ a=5, b=12, c=13.<br>
          sinA = 5/13; cosA = 12/13; tgA = 5/12.</div>
        <div class="ex"><b>–ú—ã—Å–∞–ª 2:</b> sin30¬∞=1/2; cos60¬∞=1/2; tg45¬∞=1</div>
        <h3>2. –§–æ—Ä–º—É–ª–∞–ª–∞—Ä</h3>
        <div>
          <span class="formula">sin¬≤Œ± + cos¬≤Œ± = 1</span>
          <span class="formula">sin(Œ±¬±Œ≤) = sinŒ±¬∑cosŒ≤ ¬± cosŒ±¬∑sinŒ≤</span>
          <span class="formula">cos(Œ±¬±Œ≤) = cosŒ±¬∑cosŒ≤ ‚àì sinŒ±¬∑sinŒ≤</span>
          <span class="formula">tg(Œ±¬±Œ≤) = (tgŒ± ¬± tgŒ≤)/(1 ‚àì tgŒ±¬∑tgŒ≤)</span>
        </div>
        <div class="ex"><b>–ú—ã—Å–∞–ª 3:</b> sin¬≤60¬∞ + cos¬≤60¬∞ = (‚àö3/2)¬≤ + (1/2)¬≤ = 3/4 + 1/4 = 1</div>
        <div class="ex"><b>–ö–µ—Å—Ç–µ:</b> <br> sin0¬∞=0, 30¬∞=0.5, 45¬∞=0.71, 60¬∞=0.87, 90¬∞=1</div>
      </div>
      <div class="card board">
        <div class="tools">
          <div class="tool">–†–µ–∂–∏–º: <select id="mode"><option value="pen">“ö–∞–ª–∞–º</option><option value="eraser">”®—à—ñ—Ä–≥—ñ—à</option><option value="line">–°—ã–∑“ì—ã—à</option></select></div>
          <div class="tool">“ö–∞–ª—ã“£–¥—ã“ì—ã <input id="size" type="range" min="2" max="15" value="4"></div>
          <div class="tool">–¢“Ø—Å <input id="color" type="color" value="#a21caf"></div>
          <button id="undoBtn" class="tool">‚Ü∂ Undo</button>
          <button id="clearBtn" class="tool">üßΩ –¢–∞–∑–∞–ª–∞—É</button>
        </div>
        <canvas id="canvas"></canvas>
      </div>
      <div class="card calc">
        <b>–û–Ω–ª–∞–π–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</b>
        <span class="chip">sin, cos, tg (–≥—Ä–∞–¥—É—Å–ø–µ–Ω)</span><br>
        f(x):
        <select id="trFn"><option value="sin">sin</option><option value="cos">cos</option><option value="tan">tg</option></select>
        (<input id="angle" type="number" value="45" style="width:55px">¬∞)
        <button id="trigCalcBtn">–ï—Å–µ–ø—Ç–µ—É</button>
        <span id="tcOut" class="out"></span>
        <div style="margin-top:5px;">
          <b>–¢“Ø–±—ñ—Ä:</b>
          <input id="sqv" type="number" style="width:45px">
          <button id="sqBtn">‚àö</button>
          <span id="sqOut" class="out"></span>
        </div>
      </div>
    </section>
    <section>
      <div class="card">
        <h2>–¢–µ—Å—Ç (10 —Å“±—Ä–∞“õ, 10 –±–∞–ª–ª)</h2>
        <div id="testArea"></div>
        <div class="test-result" id="testResult"></div>
        <h2 style="margin-top:15px;">–°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É (5 –∂“±–ø)</h2>
        <div class="match-grid" id="matchArea"></div>
        <div class="test-result" id="matchResult"></div>
        <h2>–¢–µ–∫—Å–µ—Ä—É –∂”ô–Ω–µ –Ω”ô—Ç–∏–∂–µ —Å–∞“õ—Ç–∞—É</h2>
        <div class="save-box">
          <span id="scoreSummary">–ñ–∞–ª–ø—ã –±–∞–ª–ª: ”ô–ª—ñ –µ—Å–µ–ø—Ç–µ–ª–≥–µ–Ω –∂–æ“õ</span>
          <button id="checkAllBtn" style="margin:3px 8px;">‚úÖ –¢–µ–∫—Å–µ—Ä—É</button>
          <label>–ê—Ç—ã-–∂”©–Ω—ñ:<input id="studentName"/></label>
          <button id="saveResultBtn">üíæ –°–∞“õ—Ç–∞—É</button>
        </div>
        <div style="color:var(--muted);font-size:12px;margin:3px 0;" id="saveMessage"></div>
        <table class="saved-table" id="resultsTable">
          <thead><tr><th>‚Ññ</th><th>–ê—Ç—ã-–∂”©–Ω—ñ</th><th>–ë–∞–ª–ª</th><th>–£–∞“õ—ã—Ç—ã</th><th>“ö–∞–ª“ì–∞–Ω —É–∞“õ.</th></tr></thead>
          <tbody></tbody>
        </table>
        <button id="clearResultsBtn" style="margin-top:6px;">üóë –¢–∞–∑–∞–ª–∞—É</button>
      </div>
    </section>
  </main>
  <footer>
    –î–µ—Ä–µ–∫—Ç–µ—Ä –±—Ä–∞—É–∑–µ—Ä–¥–µ —Å–∞“õ—Ç–∞–ª–∞–¥—ã. –ë–∞—Å—Ç—ã –±–µ—Ç ‚Äî index.html –∞—Ä“õ—ã–ª—ã ”©—Ç–µ—Å—ñ“£.
  </footer>
</div>
<script>
  // --- 1. –¢–∞–π–º–µ—Ä
  const TIMER_SEC = 15 * 60; let remaining = TIMER_SEC, timerId = null;
  const timerDisplay = document.getElementById('timerDisplay'),timerStatus=document.getElementById('timerStatus'),restartTimerBtn=document.getElementById('restartTimerBtn');
  function ftime(sec){let m=Math.floor(sec/60),s=sec%60;return String(m).padStart(2,0)+':'+String(s).padStart(2,0);}
  function updateTimerUI(){timerDisplay.textContent=ftime(remaining);
    if(remaining<=0){timerStatus.textContent='–£–∞“õ—ã—Ç –∞—è“õ—Ç–∞–ª–¥—ã.';clearInterval(timerId);timerId=null;}
    else if(remaining<=180){timerStatus.textContent='“ö–∞–ª“ì–∞–Ω —É–∞“õ—ã—Ç –∞–∑! –ñ—ã–ª–¥–∞–º!';}
    else timerStatus.textContent='–û—Ä—ã–Ω–¥–∞—É —É–∞“õ—ã—Ç—ã –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä'; }
  function startTimer(){if(timerId)clearInterval(timerId);remaining = TIMER_SEC;updateTimerUI();
    timerId=setInterval(()=>{remaining--; updateTimerUI(); if(remaining<=0)clearInterval(timerId);},1000);}
  restartTimerBtn.onclick=startTimer;startTimer();
  // --- 2. Board
  const canvas=document.getElementById('canvas'),ctx=canvas.getContext('2d'),modeEl=document.getElementById('mode'),sizeEl=document.getElementById('size'),colorEl=document.getElementById('color');
  let drawing=false,lastX=0,lastY=0,lineStart=null,history=[];
  function fitCanvas(){const r=canvas.getBoundingClientRect(),dpr=window.devicePixelRatio||1;canvas.width=Math.floor(r.width*dpr);canvas.height=Math.floor(r.height*dpr);ctx.setTransform(dpr,0,0,dpr,0,0);if(history.length){const img=new Image();img.onload=()=>ctx.drawImage(img,0,0,r.width,r.height);img.src=history[history.length-1];}}
  function snapshot(){history.push(canvas.toDataURL());if(history.length>12)history.shift();}
  function getPos(e){const r=canvas.getBoundingClientRect(),x=(e.touches?e.touches[0].clientX:e.clientX)-r.left,y=(e.touches?e.touches[0].clientY:e.clientY)-r.top;return{x,y};}
  function start(e){e.preventDefault();const{x,y}=getPos(e),mode=modeEl.value;if(mode==='line'){if(!lineStart){lineStart={x,y};}else{snapshot();ctx.save();ctx.lineCap='round';ctx.lineJoin='round';ctx.lineWidth=+sizeEl.value;ctx.strokeStyle=colorEl.value;ctx.beginPath();ctx.moveTo(lineStart.x,lineStart.y);ctx.lineTo(x,y);ctx.stroke();ctx.restore();lineStart=null;}return;}snapshot();drawing=true;lastX=x;lastY=y;}
  function move(e){if(!drawing)return;e.preventDefault();const{x,y}=getPos(e),mode=modeEl.value;ctx.save();ctx.lineCap='round';ctx.lineJoin='round';ctx.lineWidth=+sizeEl.value;if(mode==='eraser'){ctx.globalCompositeOperation='destination-out';ctx.strokeStyle='rgba(0,0,0,1)';}else{ctx.globalCompositeOperation='source-over';ctx.strokeStyle=colorEl.value;}ctx.beginPath();ctx.moveTo(lastX,lastY);ctx.lineTo(x,y);ctx.stroke();ctx.restore();lastX=x;lastY=y;}
  function end(){drawing=false;}
  document.getElementById('clearBtn').onclick=()=>{snapshot();ctx.clearRect(0,0,canvas.width,canvas.height);lineStart=null;};
  document.getElementById('undoBtn').onclick=()=>{if(history.length<2)return;history.pop();const img=new Image();img.onload=()=>{const r=canvas.getBoundingClientRect();ctx.clearRect(0,0,canvas.width,canvas.height);ctx.drawImage(img,0,0,r.width,r.height);};img.src=history[history.length-1];lineStart=null;};
  canvas.addEventListener('mousedown',start);canvas.addEventListener('mousemove',move);window.addEventListener('mouseup',end);
  canvas.addEventListener('touchstart',start,{passive:false});canvas.addEventListener('touchmove',move,{passive:false});window.addEventListener('touchend',end);
  window.addEventListener('resize',fitCanvas);fitCanvas();snapshot();
  // --- 3. Trig –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
  trigCalcBtn.onclick=()=>{
    let fn=trFn.value,ang=Number(angle.value),rad=ang*Math.PI/180;
    let v=fn==='sin'?Math.sin(rad):fn==='cos'?Math.cos(rad):Math.tan(rad);
    tcOut.textContent=fn+"("+ang+"¬∞) = "+v;
  };
  sqBtn.onclick=()=>{let v=Number(sqv.value);sqOut.textContent='‚àö'+v+' = '+Math.sqrt(v);};
  // --- 4. –¢–µ—Å—Ç
  const testQuestions = [
    {q:"1) sin30¬∞ –Ω–µ–≥–µ —Ç–µ“£?",options:["0","0.5","0.866","1"],correct:1},
    {q:"2) cos60¬∞ –Ω–µ–≥–µ —Ç–µ“£?",options:["0","0.5","1","0.866"],correct:1},
    {q:"3) tg45¬∞ = ?",options:["0","1","0.5","‚àö3"],correct:1},
    {q:"4) sin90¬∞ = ?",options:["0.5","1","0.866","0"],correct:1},
    {q:"5) cos0¬∞ = ?",options:["1","0.5","0","0.866"],correct:0},
    {q:"6) sin¬≤60¬∞ + cos¬≤60¬∞ = ?",options:["1","0.75","0.5","0"],correct:0},
    {q:"7) tg0¬∞ = ?",options:["0","1","–ë–æ–ª–º–∞–π–¥—ã","0.5"],correct:0},
    {q:"8) sin¬≤A + cos¬≤A = ?",options:["A","0","1","tgA"],correct:2},
    {q:"9) cos90¬∞ = ?",options:["1","0","0.5","-1"],correct:1},
    {q:"10) –¢—ñ–∫–±“±—Ä—ã—à—Ç—ã “Ø—à–±“±—Ä—ã—à: —Å–∏–Ω—É—Å –∞–Ω—ã“õ—Ç–∞–º–∞—Å—ã?", options:[
      "“ö–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã –∫–∞—Ç–µ—Ç/–≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞","–Ü—Ä–≥–µ–ª–µ—Å –∫–∞—Ç–µ—Ç/–≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞","“ö–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã/—ñ—Ä–≥–µ–ª–µ—Å","–ì–∏–ø–æ—Ç–µ–Ω—É–∑–∞/–∫–∞—Ç–µ—Ç"], correct:0}
  ];
  const testArea=document.getElementById('testArea');
  function renderTest(){
    testArea.innerHTML = '';
    testQuestions.forEach((q, idx) => {
      const div = document.createElement('div');
      div.className = 'question';
      div.dataset.index = idx;
      const title = document.createElement('div');
      title.className = 'question-title';
      title.textContent = q.q;
      div.appendChild(title);
      q.options.forEach((opt, i) => {
        const id = `q${idx}_opt${i}`;
        const label = document.createElement('label');
        label.className = 'option';
        label.htmlFor = id;
        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = `q${idx}`;
        radio.id = id;
        radio.value = i;
        label.appendChild(radio);
        label.appendChild(document.createTextNode(' '+opt));
        div.appendChild(label);
      });
      const fb = document.createElement('div');
      fb.className = 'small-feedback'; fb.id = `fb${idx}`; div.appendChild(fb);
      testArea.appendChild(div);
    });
  }
  renderTest();
  function checkTest(){
    let score=0, details=[];
    testQuestions.forEach((q, idx)=>{
      const sel=document.querySelector(`input[name="q${idx}"]:checked`);
      const fb=document.getElementById(`fb${idx}`);
      if(!sel){ fb.textContent="–ñ–∞—É–∞–ø —Ç–∞“£–¥–∞–ª–º–∞“ì–∞–Ω."; fb.className='small-feedback wrong'; details.push(`–°${idx+1}: –∂–∞—É–∞–ø –∂–æ“õ.`); return;}
      if(Number(sel.value)===q.correct){score++;fb.textContent="–î“±—Ä—ã—Å!";fb.className='small-feedback correct';}
      else{fb.textContent="“ö–∞—Ç–µ.";fb.className='small-feedback wrong';details.push(`–°${idx+1}: “õ–∞—Ç–µ.`);}
    });
    return {score,details};
  }
  // --- 5. –°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É
  const matchPairs = [
    {formula:"sin¬≤Œ± + cos¬≤Œ± = 1",letter:"a",desc:"–ù–µ–≥—ñ–∑–≥—ñ —Ç—Ä–∏–≥. —Ç–æ–∂–¥–µ—Å—Ç–≤–æ"},
    {formula:"sin(Œ±¬±Œ≤) = sinŒ±¬∑cosŒ≤ ¬± cosŒ±¬∑sinŒ≤",letter:"b",desc:"“ö–æ—Å—É/–ê–π—ã—Ä—É —Ñ–æ—Ä–º—É–ª–∞—Å—ã (sin)"},
    {formula:"cos(Œ±¬±Œ≤) = cosŒ±¬∑cosŒ≤ ‚àì sinŒ±¬∑sinŒ≤",letter:"c",desc:"“ö–æ—Å—É/–∞–π—ã—Ä—É (cos)"},
    {formula:"tg Œ± = sinŒ± / cosŒ±",letter:"d",desc:"–¢–∞–Ω–≥–µ–Ω—Å –∞–Ω—ã“õ—Ç–∞–º–∞—Å—ã"},
    {formula:"sin Œ± = “õ–∞—Ä—Å—ã / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞",letter:"e",desc:"–°–∏–Ω—É—Å   –∞–Ω—ã“õ—Ç–∞–º–∞—Å—ã"}
  ];
  const matchArea=document.getElementById('matchArea');
  function renderMatch(){
    const leftCol=document.createElement('div'),rightCol=document.createElement('div');
    matchPairs.forEach((item,idx)=>{
      const d=document.createElement('div');
      d.className='match-item';
      d.innerHTML=`<strong>${idx+1}) ${item.formula}</strong><br>–ñ–∞—É–∞–±—ã: <input maxlength="1" data-index="${idx}" />`;
      leftCol.appendChild(d);
    });
    const shuffled=[...matchPairs].sort(()=>Math.random()-.5);
    shuffled.forEach(item=>{
      const d=document.createElement('div');
      d.className='match-item';
      d.innerHTML=`<strong>${item.letter})</strong> ${item.desc}`;
      rightCol.appendChild(d);
    });
    matchArea.innerHTML='';matchArea.appendChild(leftCol);matchArea.appendChild(rightCol);
  }
  renderMatch();
  function checkMatch(){
    const inputs=matchArea.querySelectorAll('input[data-index]');
    let correct=0,total=matchPairs.length;
    inputs.forEach(inp=>{
      const idx=Number(inp.dataset.index);
      const val=(inp.value||'').trim().toLowerCase();
      if(val===matchPairs[idx].letter){correct++;inp.style.borderColor='var(--good)';}
      else inp.style.borderColor='var(--danger)';
    });
    return {correct,total};
  }
  // --- 6. –¢–µ–∫—Å–µ—Ä—É/–°–∞“õ—Ç–∞—É
  const checkAllBtn=document.getElementById('checkAllBtn'),scoreSummaryEl=document.getElementById('scoreSummary');
  let lastScore=null;
  checkAllBtn.onclick=()=>{
    const testRes=checkTest(),matchRes=checkMatch();
    const mainScore=testRes.score,bonus=matchRes.correct*0.2,totalScore=Math.min(10,+(mainScore+bonus).toFixed(1));
    lastScore=totalScore;
    scoreSummaryEl.textContent="–ñ–∞–ª–ø—ã –±–∞–ª–ª: "+totalScore+" / 10.";
    testResult.style.display='block'; testResult.textContent=`–¢–µ—Å—Ç: ${testRes.score}/10.`;
    matchResult.style.display='block'; matchResult.textContent=`–°”ô–π–∫–µ—Å—Ç–µ–Ω–¥—ñ—Ä—É: ${matchRes.correct}/${matchRes.total}.`;
  };
  // --- 7. –ù”ô—Ç–∏–∂–µ —Å–∞“õ—Ç–∞—É/localStorage
  const saveResultBtn=document.getElementById('saveResultBtn'),studentNameEl=document.getElementById('studentName'),saveMessageEl=document.getElementById('saveMessage'),resultsTableBody=document.querySelector('#resultsTable tbody'),clearResultsBtn=document.getElementById('clearResultsBtn');
  const STORAGE_KEY='mathBoard_trig_results';
  function loadResults(){const raw=localStorage.getItem(STORAGE_KEY);if(!raw)return[];try{const arr=JSON.parse(raw);return Array.isArray(arr)?arr:[];}catch(e){return[];}}
  function saveResults(arr){localStorage.setItem(STORAGE_KEY,JSON.stringify(arr));}
  function renderResultsTable(){const arr=loadResults();resultsTableBody.innerHTML='';arr.forEach((row,idx)=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${idx+1}</td><td>${row.name}</td><td>${row.score}</td><td>${row.time}</td><td>${row.remaining}</td>`;resultsTableBody.appendChild(tr);});}
  renderResultsTable();
  saveResultBtn.onclick=()=>{
    if(lastScore==null){saveMessageEl.textContent="–ê–ª–¥—ã–º–µ–Ω ‚Äú–¢–µ–∫—Å–µ—Ä—É‚Äù –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑.";saveMessageEl.style.color='var(--danger)';return;}
    const name=studentNameEl.value.trim();if(!name){saveMessageEl.textContent="–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã“£—ã–∑.";saveMessageEl.style.color='var(--danger)';return;}
    const now=new Date(),timeStr=now.toLocaleString('kk-KZ',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});
    const result={name,score:lastScore,time:timeStr,remaining:ftime(remaining)};
    const arr=loadResults();arr.push(result);saveResults(arr);renderResultsTable();
    saveMessageEl.textContent="–ù”ô—Ç–∏–∂–µ —Å–∞“õ—Ç–∞–ª–¥—ã.";saveMessageEl.style.color='var(--good)';
  };
  clearResultsBtn.onclick=()=>{if(confirm('–ë–∞—Ä–ª—ã“õ –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä–¥—ñ ”©—à—ñ—Ä—É–¥—ñ “õ–∞–ª–∞–π—Å—ã–∑ –±–∞?')){saveResults([]);renderResultsTable();saveMessageEl.textContent='–ë–∞—Ä–ª—ã“õ –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä ”©—à—ñ—Ä—ñ–ª–¥—ñ.';saveMessageEl.style.color='var(--muted)';}};
</script>
</body>
</html>
